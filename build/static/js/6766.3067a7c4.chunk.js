"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6766],{16027:(e,a,t)=>{t.d(a,{Af:()=>D,C7:()=>U,CB:()=>A,Ec:()=>W,F3:()=>u,GV:()=>M,HD:()=>O,HJ:()=>_,I9:()=>C,JQ:()=>v,K$:()=>p,Kl:()=>Q,Kz:()=>N,LB:()=>T,Lx:()=>i,Nw:()=>H,P2:()=>V,QQ:()=>l,Rs:()=>x,Sv:()=>q,Um:()=>b,VR:()=>y,X9:()=>I,Y$:()=>E,Yv:()=>j,Yw:()=>w,_B:()=>K,ch:()=>J,fw:()=>P,gT:()=>$,h0:()=>L,hg:()=>S,jS:()=>Y,jw:()=>z,k6:()=>f,o_:()=>h,pb:()=>R,r$:()=>k,rp:()=>G,u9:()=>d,um:()=>F,v7:()=>m,w4:()=>B,wr:()=>g});var n=t(77154),c=t(1880);const r="https://leadplanner.lotusx.shop/api/",o=n.A.create({baseURL:r,headers:{"Content-Type":"application/json"}}),s=()=>{const e=c.A.get("accessToken");e&&(o.defaults.headers.common.Authorization="Bearer ".concat(e))};s(),o.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&(window.location.href="/admin-login"),Promise.reject(e))));const i=async e=>{try{const a=await o.post("".concat(r,"/admin/login"),e);if(a.data.success){const e=a.data.data.token;c.A.set("accessToken",e,{secure:!0,sameSite:"strict"});const t=a.data.data.name;c.A.set("name",t,{secure:!0,sameSite:"strict"});const n=a.data.data.id;c.A.set("adminId",n,{secure:!0,sameSite:"strict"}),s()}return a.data}catch(a){throw console.log("error",a),a}},l=async()=>{try{return(await o.get("".concat(r,"/organization"))).data}catch(e){throw e}},d=async e=>{try{return(await o.get("".concat(r,"/organization/").concat(e))).data}catch(a){throw a}},u=async e=>{try{return(await o.post("".concat(r,"/organization"),e)).data}catch(a){throw a}},m=async e=>{try{return(await o.delete("".concat(r,"/organization/").concat(e))).data}catch(a){throw a}},h=async(e,a)=>{try{return(await o.patch("".concat(r,"/organization/").concat(e),a)).data}catch(t){throw t}},x=async()=>{try{return(await o.get("".concat(r,"/teacher"))).data}catch(e){throw e}},y=async e=>{try{return(await o.get("".concat(r,"/teacher/by-organization/").concat(e))).data}catch(a){throw a}},w=async e=>{try{return(await o.post("".concat(r,"/teacher"),e)).data}catch(a){throw a}},g=async e=>{try{return(await o.delete("".concat(r,"/teacher/").concat(e))).data}catch(a){throw a}},_=async(e,a)=>{try{return(await o.patch("".concat(r,"/teacher/").concat(e),a)).data}catch(t){throw t}},v=async()=>{try{return(await o.get("".concat(r,"/levels"))).data}catch(e){throw e}},p=async e=>{try{return(await o.post("".concat(r,"/levels"),e)).data}catch(a){throw a}},j=async e=>{try{return(await o.delete("".concat(r,"/levels/").concat(e))).data}catch(a){throw a}},S=async(e,a)=>{try{return(await o.patch("".concat(r,"/levels/").concat(e),a)).data}catch(t){throw t}},T=async e=>{try{return(await o.get("".concat(r,"/question/by_level/").concat(e))).data}catch(a){throw a}},D=async e=>{try{return(await o.post("".concat(r,"/question"),e)).data}catch(a){throw a}},b=async e=>{try{return(await o.delete("".concat(r,"/question/").concat(e))).data}catch(a){throw a}},H=async(e,a)=>{try{return(await o.patch("".concat(r,"/question/").concat(e),a)).data}catch(t){throw t}},C=async e=>{try{return(await o.get("".concat(r,"/student"))).data}catch(a){throw a}},f=async e=>{try{return(await o.get("".concat(r,"/student/organization/").concat(e))).data}catch(a){throw a}},z=async e=>{try{return(await o.post("".concat(r,"/student"),e)).data}catch(a){throw a}},k=async e=>{try{return(await o.delete("".concat(r,"/student/").concat(e))).data}catch(a){throw a}},E=async(e,a)=>{try{return(await o.patch("".concat(r,"/student/").concat(e),a)).data}catch(t){throw t}},A=async()=>{try{return(await o.get("".concat(r,"/exam"))).data}catch(e){throw e}},N=async e=>{try{return(await o.get("".concat(r,"/exam/").concat(e))).data}catch(a){throw a}},P=async e=>{try{return(await o.get("".concat(r,"/exam/get-exam-student-by-exam-id/").concat(e))).data}catch(a){throw a}},I=async e=>{try{return(await o.delete("".concat(r,"/exam/removed-student-from-exam/").concat(e))).data}catch(a){throw a}},F=async e=>{try{return(await o.delete("".concat(r,"/exam/removed-question-from-exam/").concat(e))).data}catch(a){throw a}},R=async e=>{try{return(await o.post("".concat(r,"/exam"),e)).data}catch(a){throw a}},O=async e=>{try{return(await o.delete("".concat(r,"/exam/").concat(e))).data}catch(a){throw a}},q=async(e,a)=>{try{return(await o.patch("".concat(r,"/exam/").concat(e),a)).data}catch(t){throw t}},U=async e=>{try{return(await o.get("".concat(r,"/exam/by-organization-id-for-admin/").concat(e))).data}catch(a){throw a}},B=async e=>{try{return(await o.get("".concat(r,"/exam/get-exam-qestion-by-exam-id/").concat(e))).data}catch(a){throw a}},L=async e=>{try{return(await o.post("".concat(r,"/exam/add-exam-student"),e)).data}catch(a){throw a}},G=async e=>{try{return(await o.post("".concat(r,"/exam/organization-student-not-exit"),e)).data}catch(a){throw a}},Q=async e=>{try{return(await o.post("".concat(r,"/exam/question-not-exit"),e)).data}catch(a){throw a}},M=async e=>{try{return(await o.post("".concat(r,"/exam/add-exam-question"),e)).data}catch(a){throw a}},V=async e=>{try{return(await o.get("".concat(r,"/exam/schedule-exam/").concat(e))).data}catch(a){throw a}},Y=async e=>{try{return(await o.get("".concat(r,"/exam-submission/by-examination-id/").concat(e))).data}catch(a){throw a}},W=async e=>{try{return(await o.post("".concat(r,"/exam/update-student-certificate"),e)).data}catch(a){throw a}},K=async e=>{try{return(await o.get("".concat(r,"/exam/update-student-certificate-generate/").concat(e))).data}catch(a){throw a}},$=async e=>{try{return(await o.get("".concat(r,"/exam/recent/dashboard"))).data}catch(a){throw a}},J=async e=>{try{return(await o.post("".concat(r,"/question/bulk"),e)).data}catch(a){throw a}}},56766:(e,a,t)=>{t.r(a),t.d(a,{default:()=>_});var n=t(65043),c=t(85369),r=t(93946),o=t(84718),s=t(64237),i=t(16027),l=t(42145),d=(t(2574),t(30064)),u=t.n(d),m=t(8588),h=t(1880),x=t(31899),y=t.n(x),w=(t(42511),t(73216)),g=t(70579);const _=function(e){const[a,t]=(0,n.useState)([]),[d,x]=(0,n.useState)(null),[_,v]=(0,n.useState)("Add Examination"),[p,j]=(0,n.useState)(!1),[S,T]=(0,n.useState)(!1),[D,b]=(0,n.useState)(!1),[H,C]=(0,n.useState)([]),[f,z]=(0,n.useState)([]),[k,E]=(0,n.useState)([]),[A,N]=(0,n.useState)(!1),[P,I]=(0,n.useState)(!0),[F,R]=(0,n.useState)(!1),[O,q]=(0,n.useState)(!1),U=(0,w.Zp)(),B=h.A.get("adminId"),[L,G]=(0,n.useState)({exam_name:"",total_marks:"",level_id:"",created_by:B,organization_value:null,organization_id:e.id?e.id:null,level_value:null,level_id:null,examDateTime:null,examEndDateTime:null,teacher_value:null,teacher_id:null,exam_duration:null,duration_value:null});(0,n.useEffect)((()=>{Q(),M(),V()}),[]);const Q=async()=>{if(e.id){const a=await(0,i.C7)(e.id);a.success&&t(a.data),Y(e.id),I(!1)}else{const e=await(0,i.CB)();e.success&&t(e.data)}},M=async()=>{const e=await(0,i.QQ)();console.log(e),e.success&&(e.data.map((e=>{e.label=e.name,e.value=e._id})),C(e.data))},V=async()=>{const e=await(0,i.JQ)();console.log(e),e.success&&(e.data.map((e=>{e.label=e.name,e.value=e._id})),z(e.data))},Y=async e=>{const a=await(0,i.VR)(e);console.log(a),a.success&&(a.data.map((e=>{e.label=e.name,e.value=e._id})),E(a.data))},W=async e=>{if((await u().fire({title:"Are you sure?",text:"You will not be able to recover this student!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{const a=await(0,i.HD)(e);a.success&&(l.oR.success(a.message,{position:l.oR.POSITION.TOP_RIGHT,autoClose:3e3}),Q())}catch(a){l.oR.error(a.message,{position:l.oR.POSITION.TOP_RIGHT,autoClose:3e3})}},K=async e=>{console.log(e),U("/examination-info/".concat(e))},$=[{Header:"Exam Name",accessor:"exam_name"},{Header:"Level Name",accessor:"level_id.name"},{Header:"Organization Name",accessor:"organization_id.name"},{Header:"Incharge Teacher",accessor:"teacher_id.name"},{Header:"Exam Duration",accessor:"exam_duration"},{Header:"Total Marks",accessor:"total_marks"},{Header:"Exam Start Date & Time",accessor:"examDateTime",Cell:e=>{let{value:a}=e;const t=new Date(a).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),n=new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return"".concat(t," ").concat(n)}},{Header:"Exam End Date & Time",accessor:"examEndDateTime",Cell:e=>{let{value:a}=e;const t=new Date(a).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),n=new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return"".concat(t," ").concat(n)}},{Header:"Created By",accessor:"created_by.admin_name"},{Header:"Created At",accessor:"createdAt",Cell:e=>{let{value:a}=e;const t=new Date(a).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),n=new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return"".concat(t," ").concat(n)}},{Header:"Schedule",accessor:"is_schedule",Cell:e=>{let{value:a}=e;return(0,g.jsx)(r.Q_,{color:a?"success":"danger",size:"sm",style:{color:"white",borderRadius:"20px",minWidth:"110px"},children:a?"Schedule":"Not Schedule"})}},{Header:"Status",accessor:"",Cell:e=>{let{row:a}=e;const t=new Date(a.original.examDateTime),n=new Date(a.original.examEndDateTime),c=new Date;return c<t?"Upcoming.":c>=t&&c<=n?(q(!0),"Ongoing."):(q(!0),"Completed.")}},{Header:"Actions",accessor:"_id",Cell:e=>{let{row:t}=e;return t.original.is_schedule?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(r.Q_,{color:"success",size:"sm",style:{color:"white"},onClick:()=>K(t.original._id),children:[(0,g.jsx)(c.Ny1,{})," View Details"]})," ",(0,g.jsxs)(r.Q_,{color:"danger",size:"sm",style:{color:"white"},onClick:()=>W(t.original._id),children:[(0,g.jsx)(c.qbC,{})," Delete"]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(r.Q_,{color:"success",size:"sm",style:{color:"white"},onClick:()=>K(t.original._id),children:[(0,g.jsx)(c.Ny1,{})," View Details"]})," ",(0,g.jsxs)(r.Q_,{color:"info",size:"sm",style:{color:"white"},onClick:()=>(e=>{v("Update Examination");const t=a.find((a=>a._id===e));console.log(t);const n=new Date(t.examDateTime),c=new Date(t.examEndDateTime);x(t._id),I(!1),R(!0),G({exam_name:t.exam_name,total_marks:t.total_marks,organization_value:{value:t.organization_id._id,label:t.organization_id.name},organization_id:t.organization_id._id,level_value:{value:t.level_id._id,label:t.level_id.name},level_id:t.level_id._id,duration_value:{value:t.exam_duration,label:t.exam_duration},exam_duration:t.exam_duration,teacher_value:{value:t.teacher_id._id,label:t.teacher_id.name},teacher_id:t.teacher_id._id,examDateTime:n,examEndDateTime:c})})(t.original._id),children:[(0,g.jsx)(c.uO9,{})," Edit"]})," ",(0,g.jsxs)(r.Q_,{color:"danger",size:"sm",style:{color:"white"},onClick:()=>W(t.original._id),children:[(0,g.jsx)(c.qbC,{})," Delete"]})]})}}];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(s.A,{customStyles:()=>{const a=(0,n.useRef)(),t=e=>{const{name:a,value:t,files:n}=e.target;G("examDateTime"===a||"examEndDateTime"===a?e=>({...e,[a]:new Date(t)}):e=>({...e,[a]:"file"===a?n[0]:t}))};return(0,g.jsxs)(r.qI,{ref:a,className:"row g-3 needs-validation",noValidate:!0,onSubmit:async e=>{e.preventDefault(),e.stopPropagation();const t=a.current;if(!1===t.checkValidity())return t.classList.add("was-validated"),""==L.level_id||null==L.level_id?void b(!0):""==L.organization_id||null==L.organization_id?void T(!0):void 0;L.examDateTime=new Date(L.examDateTime).toISOString(),L.examEndDateTime=new Date(L.examEndDateTime).toISOString();let n=null;L.total_marks=parseInt(L.total_marks),console.log(L),d?n=await(0,i.Sv)(d,L):(n=await(0,i.pb)(L),x(null)),n.success?(l.oR.success(n.message,{position:l.oR.POSITION.TOP_RIGHT,autoClose:3e3}),Q(),v("Add Teacher"),G({exam_name:"",total_marks:"",examDateTime:"",examEndDateTime:"",organization_value:null,organization_id:null,level_value:null,level_id:null,teacher_id:null,teacher_value:null,duration_value:null,exam_duration:null}),t.classList.remove("was-validated"),R(!1)):l.oR.error(n.message,{position:l.oR.POSITION.TOP_RIGHT,autoClose:3e3})},children:[(0,g.jsxs)(r.UF,{md:4,children:[(0,g.jsx)(r.A6,{children:"Examination Name"}),(0,g.jsx)(r.OG,{type:"text",placeholder:"Enter Examination Name",name:"exam_name",required:!0,value:L.exam_name,onChange:t}),(0,g.jsx)(r.To,{invalid:!0,children:"Please enter examination  name"})]}),(0,g.jsxs)(r.UF,{md:4,children:[(0,g.jsx)(r.A6,{children:"Select Level"}),(0,g.jsx)(m.Ay,{name:"is_type",value:L.level_value,options:f,onChange:e=>{console.log(e),G((a=>({...a,level_value:e,level_id:e.value}))),b(!1)},placeholder:"Select Level",required:!0}),(0,g.jsxs)(r.To,{className:"text-danger",style:{fontSize:"14px"},children:[" ",D?"Please select level":""]})]}),e.id?null:(0,g.jsxs)(r.UF,{md:4,children:[(0,g.jsx)(r.A6,{children:"Select Organization"}),(0,g.jsx)(m.Ay,{name:"is_type",value:L.organization_value,options:H,onChange:e=>{console.log(e),G((a=>({...a,organization_value:e,organization_id:e.value}))),Y(e.value),I(!1),T(!1)},placeholder:"Select Type",isDisabled:F,required:!0}),(0,g.jsxs)(r.To,{className:"text-danger",style:{fontSize:"14px"},children:[" ",S?"Please select organization":""]})]}),(0,g.jsxs)(r.UF,{md:4,children:[(0,g.jsx)(r.A6,{children:"Select Incharge Teacher"}),(0,g.jsx)(m.Ay,{name:"teacher_id",value:L.teacher_value,options:k,onChange:e=>{console.log(e),G((a=>({...a,teacher_value:e,teacher_id:e.value}))),N(!1)},placeholder:"Select Teacher",required:!0,isDisabled:P}),(0,g.jsxs)(r.To,{className:"text-danger",style:{fontSize:"14px"},children:[" ",A?"Please select teacher":""]})]}),(0,g.jsxs)(r.UF,{md:4,children:[(0,g.jsx)(r.A6,{children:"Select Examination Start Date and Time"}),(0,g.jsx)("div",{className:"d-flex",children:(0,g.jsx)(y(),{selected:L.examDateTime,onChange:e=>{G((a=>({...a,examDateTime:e})))},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"yyyy-MM-dd HH:mm:ss",placeholderText:"Select Examination Date and Time",className:"form-control",required:!0,minDate:new Date,filterDate:e=>e>=(new Date).setHours(0,0,0,0)})}),(0,g.jsx)(r.To,{invalid:!0,children:"Please select examination date and time"})]}),(0,g.jsxs)(r.UF,{md:4,children:[(0,g.jsx)(r.A6,{children:"Select Examination End Date and Time"}),(0,g.jsx)("div",{className:"d-flex",children:(0,g.jsx)(y(),{selected:L.examEndDateTime,onChange:e=>{G((a=>({...a,examEndDateTime:e})))},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"yyyy-MM-dd HH:mm:ss",placeholderText:"Select Examination Date and Time",className:"form-control",required:!0,minDate:L.examDateTime,filterDate:e=>e>=(new Date).setHours(0,0,0,0),filterTime:e=>{const a=L.examDateTime||new Date,t=L.examEndDateTime||a;return t.getDate()!==a.getDate()||t.getMonth()!==a.getMonth()||t.getFullYear()!==a.getFullYear()||e>a}})}),(0,g.jsx)(r.To,{invalid:!0,children:"Please select examination date and time"})]}),(0,g.jsxs)(r.UF,{md:4,children:[(0,g.jsx)(r.A6,{children:"Select Duration"}),(0,g.jsx)(m.Ay,{name:"exam_duration",value:L.duration_value,options:[{value:"30M",label:"30 M"},{value:"1H",label:"1 H"},{value:"1.5H",label:"1.5 H"},{value:"2H",label:"2 H"},{value:"2.5H",label:"2.5 H"},{value:"3H",label:"3 H"},{value:"3.5H",label:"3.5 H"},{value:"4H",label:"4 H"},{value:"4.5H",label:"4.5 H"}],onChange:e=>{console.log(e),G((a=>({...a,duration_value:e,exam_duration:e.value})))},placeholder:"Select Duration"})]}),(0,g.jsxs)(r.UF,{md:4,children:[(0,g.jsx)(r.A6,{children:"Total Marks"}),(0,g.jsx)(r.OG,{type:"number",placeholder:"Enter total marks",name:"total_marks",required:!0,value:L.total_marks,onChange:t}),(0,g.jsx)(r.To,{invalid:!0,children:"Please enter total marks"})]}),(0,g.jsx)(r.UF,{xs:12,className:"d-flex justify-content-end",children:(0,g.jsx)(r.Q_,{color:"primary",type:"submit",children:_})})]})},title:"Examination Master"}),(0,g.jsx)(o.A,{columns:$,data:a})]})}},84718:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(65043),c=t(71094),r=t(61270),o=t(68155),s=t(64196),i=t(11238),l=t(70579);const d=e=>{let{columns:a,data:t,name:d}=e;const{getTableProps:u,getTableBodyProps:m,headerGroups:h,prepareRow:x,page:y,state:{pageIndex:w,pageSize:g,globalFilter:_},setGlobalFilter:v,gotoPage:p,nextPage:j,previousPage:S,canNextPage:T,canPreviousPage:D}=(0,c.useTable)({columns:a,data:t,initialState:{pageIndex:0,pageSize:10}},c.useGlobalFilter,c.useSortBy,c.usePagination);return(0,l.jsxs)("div",{className:"data-table-container",children:[(0,l.jsx)("h5",{children:d||""}),(0,l.jsxs)("div",{className:"data-table-header",children:[(0,l.jsxs)("div",{className:"search-box-container",children:[(0,l.jsx)(r.A,{type:"text",value:_||"",onChange:e=>v(e.target.value),placeholder:"Search..."}),(0,l.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"})]}),(0,l.jsx)(o.A,{onClick:()=>(()=>{const e=t.map((e=>a.reduce(((a,t)=>(a[t.Header]=e[t.accessor],a)),{}))),n=i.Wp.json_to_sheet(e),c=i.Wp.book_new();i.Wp.book_append_sheet(c,n,"Sheet 1"),i._h(c,"data.xlsx")})(),variant:"success",className:"download_excel",style:{color:"white"},children:"Download Excel"})]}),(0,l.jsx)("div",{className:"table-wrapper",children:(0,l.jsxs)(s.A,{...u(),bordered:!0,hover:!0,responsive:!0,children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Sr. No."}),h.map((e=>(0,l.jsx)(n.Fragment,{children:e.headers.map((e=>(0,l.jsxs)("th",{...e.getHeaderProps(e.getSortByToggleProps()),children:[e.render("Header"),(0,l.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]},e._id)))},e._id)))]})}),(0,l.jsx)("tbody",{...m(),children:y.map(((e,a)=>(x(e),(0,l.jsxs)("tr",{...e.getRowProps(),children:[(0,l.jsx)("td",{children:w*g+a+1}),e.cells.map((e=>(0,l.jsx)("td",{...e.getCellProps(),children:e.render("Cell")},e.column._id)))]},e._id))))})]})}),(0,l.jsxs)("div",{className:"pagination-controls",children:[(0,l.jsx)("button",{onClick:()=>p(0),disabled:!D,children:"<<"}),(0,l.jsx)("button",{onClick:()=>S(),disabled:!D,children:"<"}),(0,l.jsx)("button",{onClick:()=>j(),disabled:!T,children:">"}),(0,l.jsx)("button",{onClick:()=>p(y.length-1),disabled:!T,children:">>"}),(0,l.jsxs)("span",{children:["\xa0Page ",(0,l.jsx)("strong",{children:w+1})," of ",Math.ceil(t.length/g)," pages | Showing ",t.length," Records"]})]})]})}},64237:(e,a,t)=>{t.d(a,{A:()=>r});t(65043);var n=t(93946),c=t(70579);const r=e=>{let{customStyles:a,title:t}=e;return(0,c.jsx)(n.sK,{children:(0,c.jsx)(n.UF,{xs:12,children:(0,c.jsxs)(n.E$,{className:"mb-4",children:[(0,c.jsx)(n.V0,{children:(0,c.jsx)("strong",{children:t})}),(0,c.jsx)(n.W6,{children:a?a():null})]})})})}}}]);
//# sourceMappingURL=6766.3067a7c4.chunk.js.map